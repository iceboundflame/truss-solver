<!--
Time log
Sat 11/12 - 22:00 - 04:00 (6h)
- 622 LOC : ~103 lines/hr
- construction interface ready
- can make matrix, but it's not square
- next steps: computation, display computed forces

Sun 11/12 - 15:00 - 18:00 (3h)
- calculations work
- now just polishing left
- todo: color members based on compression/tension
- todo: delete with right-click is blocked by ctx menu
- todo: better-looking ghost member
- todo: show member lengths
- todo(advanced): save/load trusses, share by URL

Thu 11/17 - 15:00 - 19:00 (4h)
- lots of polishing
- all TODO's above are done.

TODO:
  / Put save URL button in toolbar

  - Big bug FF/Mac: Can't draw members
  - Perf can be slow with live updating - add option to disable
  - Improve numerical robustness of solver - maybe don't invert matrix?

-->

<html>
<head>
<title>DCL Truss Solver</title>

<script src="lib/jquery-1.6.2.min.js" type="text/javascript"></script>
<script src="lib/jquery-ui-1.8.16.custom.min.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="lib/dark-hive/jquery-ui-1.8.16.custom.css" />
<script src="lib/raphael-min.js" type="text/javascript"></script>
<script src="lib/raphael.blur.js" type="text/javascript"></script>
<script src="lib/sylvester.js" type="text/javascript"></script>
<script src="lib/underscore.js" type="text/javascript"></script>
<script src="lib/json2.js" type="text/javascript"></script>
<script src="lib/jquery.ba-hashchange.min.js" type="text/javascript"></script>
<script src="lib/webtoolkit.base64.js" type="text/javascript"></script>
<script src="lib/lzw.js" type="text/javascript"></script>

<style>
html {
  background: #333;
  color: #f0f0f0;
  font-family: Tahoma, sans-serif;
  font-size: 12px;
  line-height: 1.4;
}
button.active {
  background: red !important;
}
input#blob {
  width: 200px;
}
#controls {
  font-size: 10px;
}

#console2 table {
  font-size: 10px;
  white-space: nowrap;
}
#console1, #console2 {
  background: #222;
  padding: 10px;
  margin: 10px;
  overflow-x: auto;
  overflow-y: visible;
}
#container {
  margin: auto;
  width: 960px;
}
</style>
</head>

<body>
<div id="container">
  <div id="controls">
    <div class="ui-widget-header ui-corner-all">
      <button id="arrow-btn">Select [1]</button>
      <button id="add-node-btn">Add Node [2]</button>
      <button id="add-member-btn">Add Member [3]</button>
      <button id="add-support-btn">Add Fixed Support [4]</button>
      <button id="add-load-btn">Add Load [5]</button>
    </div>
    <div class="ui-widget-header ui-corner-all">
      <button id="toggle-compute-btn">Toggle Length/Forces</button>
      <button id="clear-btn">Clear</button>
      <button id="recompute-blob-btn">Generate Link to Save Truss</button>
      <span>
        <label for="blob">Permalink (select and copy):</label>
        <input type="text" id="blob" />
      </span>
    </div>
  </div>

  <div id="canvas"></div>

  <div id="tips">
    <p>Tips</p>
    <ul>
      <li>Snapping is on by default. Hold down SHIFT to disable temporarily.</li>
      <li>Use keyboard keys 1-5 to quickly switch tools.</li>
      <li>Select/Add Node: Right-click a node to delete it, drag to move it.</li>
      <li>Select/Add Member: Right-click a member to delete it.</li>
      <li>Add Support: Click on nodes to toggle the type of support.</li>
      <li>Add Load: Click and drag nodes to create loads. Click a node to remove loads.</li>
      <li>When the system is solvable, computed forces will appear on the screen.</li>
      <li>Positive member forces are in tension, negative indicates compression.</li>
    </ul>
  </div>
</div>

<div id="console1"></div>
<div id="console2"></div>

<script>
var w = 960;
var h = 600;
var gridspace = 50;

function showElems() {
  $('#console1').html(_.size(members)+" members, "+_.size(nodes)+" nodes, "+_.size(supports)+" supports, "+_.size(loads)+" loads");
}
setInterval(showElems, 100);
</script>
<script type="text/javascript" src="js/drawing.js"></script>
<script type="text/javascript" src="js/interactions.js"></script>
<script type="text/javascript" src="js/compute.js"></script>
<script type="text/javascript" src="js/model.js"></script>

</body>
</html>
